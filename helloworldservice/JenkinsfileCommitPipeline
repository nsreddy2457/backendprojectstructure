pipeline{
    agent any
    
    stages{
    	stage('Build'){
    		steps{
                echo "Starting Build stage"
                 script{
                     sh "cd ./helloworldservice"
                     def mvnHome = tool 'mvn'
                     sh "${mvnHome}/bin/mvn clean package"
                 }
            }
            post{
                success{
                    echo "Build completed"
                }
            }
    	}
    	
        
        stage('Sonar Coverage Analysis'){
            steps{
                echo("Starting Sonar Coverage Analysis")
            }
            post{
                success{
                    echo "Sonar Coverage Analysis completed"
                }
            }
        }
        
        
        stage('Docker Image'){
            steps{
                echo "Creating Docker Image"
                sh "docker build -t helloWorldService:1.0 ."
            }
            post{
                success{
                    echo "Docker Image Created"
                }
            }
        }
        
        
        // stage('Acceptance Pipeline Trigger'){
        //     steps{
        //         echo "Triggering Acceptance Pipeline"
        //         build job: "AcceptancePipelineDemo", wait: false
        //     }
        // }
    }
}
